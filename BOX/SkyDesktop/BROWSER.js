SkyDesktop.Button=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{flt:"left",padding:"11px 21px",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",borderRadius:4},spacing:10,on:{mouseover:(t,e)=>{e.addStyle({backgroundColor:"#cacbcd"})},mouseout:(t,e)=>{e.addStyle({backgroundColor:"#e0e1e2"})}}}}}),SkyDesktop.Noti=METHOD({run:t=>{let e=UUI.PANEL({style:{position:"fixed",right:10,bottom:10,backgroundColor:"#333",borderRadius:5},contentStyle:{padding:"5px 10px"},c:t}).appendTo(BODY);UANI.SHOW_SLIDE_UP({node:e}),DELAY(2,()=>{UANI.HIDE_SLIDE_DOWN({node:e},e.remove)})}}),SkyDesktop.File=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"2px 5px",cursor:"default"},icon:IMG({src:SkyDesktop.R("file.png")}),spacing:5,on:{mouseover:(t,e)=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(t,e)=>{e.addStyle({backgroundColor:"transparent"})}}}}}),SkyDesktop.FileTree=CLASS({preset:()=>{return UUI.LIST},init:(t,e)=>{let o;OVERRIDE(e.addItem,t=>{o=e.addItem=(e=>{t(e),EVENT.fireAll("resize")})})}}),SkyDesktop.Folder=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"2px 5px",cursor:"default"},listStyle:{marginLeft:20},icon:IMG({src:SkyDesktop.R("folder.png")}),spacing:5,on:{mouseover:(t,e)=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(t,e)=>{e.addStyle({backgroundColor:"transparent"})}}}},init:(t,e,o)=>{let n,i;void 0!==o&&(n=o.listStyle,i=o.isOpened);let d=UUI.LIST({style:n});e.after(d);let r=e.open=(()=>{d.show(),e.setIcon(IMG({src:SkyDesktop.R("folder-opened.png")}))}),u=e.close=(()=>{d.hide(),e.setIcon(IMG({src:SkyDesktop.R("folder.png")}))});i!==!0&&u(),e.on("tap",()=>{d.checkIsShowing()===!0?u():r()});let c=e.addItem=(t=>{d.addItem(t)});void 0!==o&&void 0!==o.items&&EACH(o.items,(t,e)=>{c({key:e,item:t})});e.removeItem=(t=>{d.removeItem(t)}),e.removeAllItems=(()=>{d.removeAllItems()})}}),SkyDesktop.HorizontalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(t,e,o)=>{let n=[],i=[],d=CLEAR_BOTH(),r=()=>{let t=0,o=0;EACH(n,e=>{void 0===e.getSize()?o+=1:t+=e.getSize(),e.addStyle({width:0,height:0})}),EACH(i,t=>{t.addStyle({height:0})});let d=e.getHeight(),r=t/(n.length-o);t+=r*o,EACH(n,o=>{void 0===o.getSize()&&o.setSize(r),o.addStyle({width:(e.getWidth()-8*(n.length-1))*o.getSize()/t,height:d})}),EACH(i,t=>{t.addStyle({height:d})})},u=e.addTab=(t=>{if(n.length>0){let o,d,r,u=n[n.length-1];e.append(o=DIV({style:{flt:"left",width:8,height:"100%",cursor:"e-resize"},on:{touchstart:e=>{let o=e.getLeft(),n=u.getWidth(),i=t.getWidth();BODY.addStyle({cursor:"e-resize"}),void 0!==d&&d.remove(),d=EVENT("touchmove",e=>{let d=e.getLeft()-o;n+d<100&&(d=100-n),i-d<100&&(d=i-100),u.addStyle({width:n+d}),t.addStyle({width:i-d})}),void 0!==r&&r.remove(),r=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),u.setSize(u.getSize()*u.getWidth()/n),t.setSize(t.getSize()*t.getWidth()/i),d.remove(),d=void 0,r.remove(),r=void 0}),e.stop()}}})),i.push(o)}t.addStyle({flt:"left"}),e.append(t),e.append(d),n.push(t),r()});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,u),e.on("show",r);let c=EVENT("resize",r);e.on("remove",()=>{c.remove(),c=void 0})}}),SkyDesktop.Tab=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",overflow:"auto",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000"}}},init:(t,e,o)=>{let n,i,d;void 0!==o&&(n=o.icon,i=o.title,d=o.size);e.setIcon=(t=>{n=t,e.fireEvent("iconchange")}),e.getIcon=(()=>{return n}),e.setTitle=(t=>{i=t,e.fireEvent("titlechange")}),e.getTitle=(()=>{return i}),e.setSize=(t=>{d=t}),e.getSize=(()=>{return d})}}),SkyDesktop.TabGroup=CLASS({preset:()=>{return TABLE},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(t,e,o)=>{let n,i,d=[],r=[],u=CLEAR_BOTH();TR({c:i=TD({style:{height:27}})}).appendTo(e);let c;TR({c:c=TD()}).appendTo(e);let s=e.addTab=(t=>{let e,o=r.length;i.append(e=UUI.BUTTON_H({style:{padding:"5px 10px",flt:"left",cursor:"default"},icon:t.getIcon(),spacing:5,title:t.getTitle(),on:{mouseover:()=>{n!==o&&e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:()=>{n!==o&&e.addStyle({backgroundColor:"transparent"})},tap:()=>{a(o)}}})),i.append(u),d.push(e),t.on("iconchange",()=>{e.setIcon(t.getIcon())}),t.on("titlechange",()=>{e.setTitle(t.getTitle())}),c.append(t),r.push(t),t.hide()});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,s);let a=e.activeTab=(t=>{n=t,EACH(d,t=>{t.addStyle({backgroundColor:"transparent"})}),EACH(r,t=>{t.hide()}),d[t].addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff"}),r[t].show()});a(0)}}),SkyDesktop.VerticalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(t,e,o)=>{let n=[],i=()=>{let t=0,o=0;EACH(n,e=>{void 0===e.getSize()?o+=1:t+=e.getSize(),e.addStyle({height:0})});let i=t/(n.length-o);t+=i*o,EACH(n,o=>{void 0===o.getSize()&&o.setSize(i),o.addStyle({height:(e.getHeight()-10*(n.length-1))*o.getSize()/t})})},d=e.addTab=(t=>{if(n.length>0){let o,i,d=n[n.length-1];e.append(DIV({style:{height:8,cursor:"n-resize"},on:{touchstart:e=>{let n=e.getTop(),r=d.getHeight(),u=t.getHeight();BODY.addStyle({cursor:"n-resize"}),void 0!==o&&o.remove(),o=EVENT("touchmove",e=>{let o=e.getTop()-n;r+o<100&&(o=100-r),u-o<100&&(o=u-100),d.addStyle({height:r+o}),t.addStyle({height:u-o})}),void 0!==i&&i.remove(),i=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),d.setSize(d.getSize()*d.getHeight()/r),t.setSize(t.getSize()*t.getHeight()/u),o.remove(),o=void 0,i.remove(),i=void 0}),e.stop()}}}))}e.append(t),n.push(t),i()});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,d),e.on("show",i);let r=EVENT("resize",i);e.on("remove",()=>{r.remove(),r=void 0})}}),SkyDesktop.Toolbar=CLASS({preset:()=>{return UUI.V_CENTER},params:()=>{return{style:{backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#ccc",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000",height:"100%",borderBottom:"1px solid #999"}}},init:(t,e,o)=>{let n=[],i=CLEAR_BOTH(),d=()=>{let t=0;EACH(n,t=>{t.showTitle()}),EACH(n,e=>{t+=e.getWidth()}),e.getWidth()<t&&EACH(n,t=>{t.hideTitle()})},r=e.addButton=(t=>{e.append(t),e.append(i),n.push(t),d()});void 0!==o&&void 0!==o.buttons&&EACH(o.buttons,r),e.on("show",d),DELAY(d);let u=EVENT("resize",d);e.on("remove",()=>{u.remove(),u=void 0})}}),SkyDesktop.ToolbarButton=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{flt:"left",padding:"5px 8px"},spacing:5,on:{mouseover:(t,e)=>{e.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(t,e)=>{e.addStyle({backgroundColor:"transparent"})}}}},init:(t,e,o)=>{let n=o.icon,i=o.title;e.hideTitle=(()=>{n.addStyle({marginRight:0}),e.setTitle("")}),e.showTitle=(()=>{n.addStyle({marginRight:5}),e.setTitle(i)})}});