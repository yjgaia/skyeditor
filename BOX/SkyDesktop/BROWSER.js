SkyDesktop.Button=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{flt:"left",padding:"11px 21px",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",borderRadius:4},spacing:10,on:{mouseover:(e,t)=>{t.addStyle({backgroundColor:"#cacbcd"})},mouseout:(e,t)=>{t.addStyle({backgroundColor:"#e0e1e2"})}}}}}),SkyDesktop.Noti=METHOD({run:e=>{let t=UUI.PANEL({style:{position:"fixed",right:10,bottom:10,backgroundColor:"#333",borderRadius:5},contentStyle:{padding:"5px 10px"},c:e}).appendTo(BODY);UANI.SHOW_SLIDE_UP({node:t}),DELAY(2,()=>{UANI.HIDE_SLIDE_DOWN({node:t},t.remove)})}}),SkyDesktop.File=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"2px 5px",cursor:"default"},icon:IMG({src:SkyDesktop.R("file.png")}),spacing:5,on:{mouseover:(e,t)=>{t.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,t)=>{t.addStyle({backgroundColor:"transparent"})}}}}}),SkyDesktop.FileTree=CLASS({preset:()=>{return UUI.LIST},init:(e,t)=>{let o;OVERRIDE(t.addItem,e=>{o=t.addItem=(t=>{e(t),EVENT.fireAll("resize")})})}}),SkyDesktop.Folder=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"2px 5px",cursor:"default"},listStyle:{marginLeft:20},icon:IMG({src:SkyDesktop.R("folder.png")}),spacing:5,on:{mouseover:(e,t)=>{t.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,t)=>{t.addStyle({backgroundColor:"transparent"})}}}},init:(e,t,o)=>{let n,i;void 0!==o&&(n=o.listStyle,i=o.isOpened);let r=UUI.LIST({style:n});t.after(r);let d=t.open=(()=>{r.show(),t.setIcon(IMG({src:SkyDesktop.R("folder-opened.png")}))}),c=t.close=(()=>{r.hide(),t.setIcon(IMG({src:SkyDesktop.R("folder.png")}))});i!==!0&&c(),t.on("tap",()=>{r.checkIsShowing()===!0?c():d()});let u=t.addItem=(e=>{r.addItem(e)});void 0!==o&&void 0!==o.items&&EACH(o.items,(e,t)=>{u({key:t,item:e})});t.removeItem=(e=>{r.removeItem(e)}),t.removeAllItems=(()=>{r.removeAllItems()})}}),SkyDesktop.HorizontalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,t,o)=>{let n=[],i=[],r=CLEAR_BOTH(),d=()=>{let e=0,o=0;EACH(n,t=>{void 0===t.getSize()?o+=1:e+=t.getSize(),t.addStyle({width:0,height:0})}),EACH(i,e=>{e.addStyle({height:0})});let r=t.getHeight(),d=e/(n.length-o);e+=d*o,EACH(n,o=>{void 0===o.getSize()&&o.setSize(d),o.addStyle({width:(t.getWidth()-8*(n.length-1))*o.getSize()/e,height:r})}),EACH(i,e=>{e.addStyle({height:r})})},c=t.addTab=(e=>{if(n.length>0){let o,r,d,c=n[n.length-1];t.append(o=DIV({style:{flt:"left",width:8,height:"100%",cursor:"e-resize"},on:{touchstart:t=>{let o=t.getLeft(),n=c.getWidth(),i=e.getWidth();BODY.addStyle({cursor:"e-resize"}),void 0!==r&&r.remove(),r=EVENT("touchmove",t=>{let r=t.getLeft()-o;n+r<100&&(r=100-n),i-r<100&&(r=i-100),c.addStyle({width:n+r}),e.addStyle({width:i-r})}),void 0!==d&&d.remove(),d=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),c.setSize(c.getSize()*c.getWidth()/n),e.setSize(e.getSize()*e.getWidth()/i),r.remove(),r=void 0,d.remove(),d=void 0}),t.stop()}}})),i.push(o)}e.addStyle({flt:"left"}),t.append(e),t.append(r),n.push(e),d()});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,c),t.on("show",d);let u=EVENT("resize",d);t.on("remove",()=>{u.remove(),u=void 0})}}),SkyDesktop.Tab=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",overflow:"auto",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000"}}},init:(e,t,o)=>{let n,i,r;void 0!==o&&(n=o.icon,i=o.title,r=o.size);t.setIcon=(e=>{n=e,t.fireEvent("iconchange")}),t.getIcon=(()=>{return n}),t.setTitle=(e=>{i=e,t.fireEvent("titlechange")}),t.getTitle=(()=>{return i}),t.setSize=(e=>{r=e}),t.getSize=(()=>{return r})}}),SkyDesktop.TabGroup=CLASS({preset:()=>{return TABLE},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,t,o)=>{let n;void 0!==o&&(n=o.homeTab);let i,r=[],d=[],c=-1,u=CLEAR_BOTH();TR({c:i=TD({style:{height:27}})}).appendTo(t);let s;TR({c:s=TD({c:n})}).appendTo(t);let a=t.activeTab=(e=>{c=e,EACH(r,e=>{e.addStyle({backgroundColor:"transparent"})}),EACH(d,e=>{e.hide()}),r[e].addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff"}),d[e].show()}),S=t.removeTab=(e=>{r[e].remove(),r.splice(e,1),d[e].remove(),d.splice(e,1),e<=c&&(c-1>=0?a(c-1):d.length>0?a(0):c=-1)}),l=t.addTab=(e=>{let t;i.append(t=UUI.BUTTON_H({style:{padding:"5px 10px",flt:"left",cursor:"default"},icon:e.getIcon(),spacing:5,title:[e.getTitle(),UUI.ICON_BUTTON({style:{marginLeft:10,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("times"),on:{mouseover:(e,t)=>{t.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"})},mouseout:(e,t)=>{t.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"})},tap:()=>{S(FIND({array:d,value:e}))}}})],on:{mouseover:()=>{c!==FIND({array:d,value:e})&&t.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:()=>{c!==FIND({array:d,value:e})&&t.addStyle({backgroundColor:"transparent"})},tap:()=>{a(FIND({array:d,value:e}))}}})),i.append(u),r.push(t),e.on("iconchange",()=>{t.setIcon(e.getIcon())}),e.on("titlechange",()=>{t.setTitle(e.getTitle())}),s.append(e),d.push(e),a(d.length-1)});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,l)}}),SkyDesktop.VerticalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,t,o)=>{let n=[],i=()=>{let e=0,o=0;EACH(n,t=>{void 0===t.getSize()?o+=1:e+=t.getSize(),t.addStyle({height:0})});let i=e/(n.length-o);e+=i*o,EACH(n,o=>{void 0===o.getSize()&&o.setSize(i),o.addStyle({height:(t.getHeight()-10*(n.length-1))*o.getSize()/e})})},r=t.addTab=(e=>{if(n.length>0){let o,i,r=n[n.length-1];t.append(DIV({style:{height:8,cursor:"n-resize"},on:{touchstart:t=>{let n=t.getTop(),d=r.getHeight(),c=e.getHeight();BODY.addStyle({cursor:"n-resize"}),void 0!==o&&o.remove(),o=EVENT("touchmove",t=>{let o=t.getTop()-n;d+o<100&&(o=100-d),c-o<100&&(o=c-100),r.addStyle({height:d+o}),e.addStyle({height:c-o})}),void 0!==i&&i.remove(),i=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),r.setSize(r.getSize()*r.getHeight()/d),e.setSize(e.getSize()*e.getHeight()/c),o.remove(),o=void 0,i.remove(),i=void 0}),t.stop()}}}))}t.append(e),n.push(e),i()});void 0!==o&&void 0!==o.tabs&&EACH(o.tabs,r),t.on("show",i);let d=EVENT("resize",i);t.on("remove",()=>{d.remove(),d=void 0})}}),SkyDesktop.Toolbar=CLASS({preset:()=>{return UUI.V_CENTER},params:()=>{return{style:{backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#ccc",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000",height:"100%",borderBottom:"1px solid #999"}}},init:(e,t,o)=>{let n=[],i=CLEAR_BOTH(),r=()=>{let e=0;EACH(n,e=>{e.showTitle()}),EACH(n,t=>{e+=t.getWidth()}),t.getWidth()<e&&EACH(n,e=>{e.hideTitle()})},d=t.addButton=(e=>{t.append(e),t.append(i),n.push(e),r()});void 0!==o&&void 0!==o.buttons&&EACH(o.buttons,d),t.on("show",r),DELAY(r);let c=EVENT("resize",r);t.on("remove",()=>{c.remove(),c=void 0})}}),SkyDesktop.ToolbarButton=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{flt:"left",padding:"5px 8px"},spacing:5,on:{mouseover:(e,t)=>{t.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,t)=>{t.addStyle({backgroundColor:"transparent"})}}}},init:(e,t,o)=>{let n=o.icon,i=o.title;t.hideTitle=(()=>{n.addStyle({marginRight:0}),t.setTitle("")}),t.showTitle=(()=>{n.addStyle({marginRight:5}),t.setTitle(i)})}});